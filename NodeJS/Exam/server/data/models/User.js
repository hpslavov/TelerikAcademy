var mongoose = require('mongoose'),
    encryption = require('../../utilities/encryption');

var requiredMessage = '{PATH} is required';
var defaultAvatar = 'https://data:image/jpeg;base64,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';

module.exports.init = function() {
    var userSchema = mongoose.Schema({
        username: {
            type: String,
            required: requiredMessage,
            unique: true
        },
        salt: String,
        hashPass: String,
        firstName: {
            type: String,
            required: requiredMessage
        },
        lastName: {
            type: String,
            required: requiredMessage
        },
        email: {
            type: String,
            required: requiredMessage
        },
        avatar: {
            type: String,
            default: defaultAvatar
        },
        rating:{
            type:Number
        },
        playlists:{
            type:Array
        }
    });

    userSchema.method({
        authenticate: function(password) {
            if (encryption.generateHashedPassword(this.salt, password) === this.hashPass) {
                return true;
            }
            else {
                return false;
            }
        }
    });

    var User = mongoose.model('User', userSchema);
};


